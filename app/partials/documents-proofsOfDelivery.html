<div class="row-fluid">
	<div class="span12 header bg-proofOfDelivery bg-generic">
		<h1 class="borders">Proofs of delivery</h1>
	</div>
</div>

<div class="row-fluid borders border-top">
	<div class="span12">
	    <accordion close-others="false">
    	    <accordion-group>
    	    	<accordion-heading>
    	    		<h4>Filters</h4>
    	    	</accordion-heading>
    			<div class="row-fluid">
    				<div class="span4">
    					<legend>related to</legend>		
    					<label class="control-label" ng-repeat="related in filters.related.type.values" class="radio">
    						<input type="radio" ng-model="query.type" value="{{type}}" ng-change="queryInit()"> {{related}}
    					</label>
    					<input type="text" ng-model="query.search" placeholder="Reference">
    					
    				</div>
    				
    				<div class="span4">
    			    	<legend>user </legend>
    			    	<select ng-model="query.milestone_name" ng-options="user for user in filters.users.values"><option value="">---</option></select>
    					<legend>created from </legend>
    					<div class="input-append">
    						<input type="text" datepicker-popup="dd.MM.yyyy" ng-model="query.milestone_startDate" open="opened" min="minDate" max="'2015-06-22'" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" ng-required="true" show-weeks="false" />
    						<button class="btn" ng-click="open()"><i class="fa fa-calendar"></i></button>
    					</div>
    					<legend>created before </legend>
    					<div class="input-append">
    						<input type="text" datepicker-popup="dd.MM.yyyy" ng-model="query.milestone_startDate" open="opened" min="minDate" max="'2015-06-22'" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" ng-required="true" show-weeks="false" />
    						<button class="btn" ng-click="open()"><i class="fa fa-calendar"></i></button>
    					</div>
    				</div>
    				
    				<div class="span4">
    				    <legend>collection </legend>
    				    <select ng-model="query.milestone_name" ng-options="location for location in filters.collection.values"><option value="">---</option></select>
    				    <legend>delivery </legend>
    				    <select ng-model="query.milestone_name" ng-options="location for location in filters.delivery.values"><option value="">---</option></select>
    				</div>
    			</div><!--/row-->
    			<button class="btn btn-block btn-large btn-generic border-top border-bottom" type="button" ng-click="search(query); showList=true">Load</button>
    	    </accordion-group>
        </accordion>
    </div>
</div>

<div class="row-fluid borders">
	<div class="span12">
		<table class="table table-condensed" >
			<thead>
				<tr>
					<th>order</th><th>shipment</th><th>user</th><th>created</th><th>collection</th><th>delivery</th>
				</tr>
			</thead>
			<tbody>
				<tr  ng-repeat="doc in docs" class="pointer over" ng-click="go('proof-of-delivery', doc.id)" > 
					<td><span class="label label-order">{{doc.related.order.reference}}</span></td>
					<td><span class="label label-shipment">{{doc.related.shipment.reference}}</span></td>
					<td><small>{{doc.user}}</small></td>
					<td><small>{{doc.date * 1000 | date:'dd.MM.yy, HH:mm'}}</small></td>
					<td><small>{{doc.collection.company.name}}</small></td>
					<td><small>{{doc.delivery.company.name}}</small></td>
				</tr>
			</tbody>
			<tfoot ng-show="pagesCount>1">
				<tr>
					<td colspan="4">
					<pagination num-pages="pagesCount" current-page="currentPage" max-size="10" boundary-links="true" direction-links="false" on-select-page="loadList(collect(listInit, {page: page}))" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></td>
				</tr>
			</tfoot>
		</table>	
			
		</div>
   	
</div>