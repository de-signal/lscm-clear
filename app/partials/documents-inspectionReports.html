<div class="row-fluid">
	<div class="span12 header bg-inspectionReport bg-generic">
		<h1 class="borders">Inspection reports</h1>
	</div>
</div>

<div class="row-fluid borders border-top">
	<div class="span12">
	    <accordion close-others="false">
    	    <accordion-group>
    	    	<accordion-heading>
    	    		<h4>Filters</h4>
    	    	</accordion-heading>
    			<div class="row-fluid">
    				<div class="span4">
    					<legend>Related to </legend>		
    					<label class="control-label radio" ng-repeat="related in filters.related.type.values">
    						<input type="radio" ng-model="query.related_to" value="{{related}}"> {{related}} 
    					</label>
    					<input type="text" ng-model="query.reference" placeholder="Reference" ng-show="query.related_to">
    				</div>
    				
    				<div class="span4">
    					<legend>Location</legend>
    					<select ng-model="query.location" ng-options="location for location in filters.locations.values"><option value="">---</option></select>
    					<legend>User </legend>
    					<select ng-model="query.user" ng-options="user for user in filters.users.values"><option value="">---</option></select>
    				</div>
    				
    				<div class="span4">
    					<legend>From </legend>
    					<div class="input-append">
    						<input type="text" datepicker-popup="dd.MM.yy" ng-model="date.from.value" is-open="date.from.opened" date-disabled="calDisabled(date, mode)" show-weeks="false" max="date.to.value" ng-change="query.date_from = dateToTimestamp(date.from.value)" />
    						<button class="btn" ng-click="calOpen('from')"><i class="fa fa-calendar"></i></button>
    					</div>
    					<legend>To </legend>
    					<div class="input-append">
    						<input type="text" datepicker-popup="dd.MM.yy" ng-model="date.to.value" is-open="date.to.opened" date-disabled="calDisabled(date, mode)" show-weeks="false" min="date.from.value" ng-change="query.date_to = dateToTimestamp(date.to.value)" />
    						<button class="btn" ng-click="calOpen('to')"><i class="fa fa-calendar"></i></button>
    					</div>
    				</div>
    			</div><!--/row-->
    			<button class="btn btn-block btn-large btn-generic" type="button" ng-click="search(query)">Load</button>
    	    </accordion-group>
        </accordion>
    </div>
</div>

<div class="row-fluid borders" ng-show="badges">
	<div class="span12">
		<span class="badge badge-inverse" ng-repeat="badge in badges">{{badge.display}} <i class="fa fa-times pointer" ng-click="badgeRemove(badge.name)"></i></span> 
	</div>
</div>

<div class="row-fluid borders">
	<div class="span12">			
		<table class="table table-condensed" >
			<thead>
				<tr>
					<th>order</th><th>shipment</th><th>location</th><th>user</th><th>created</th><th>closed</th><th>boxes</th><th>conformity</th>
				</tr>
			</thead>
			<tbody>
				<tr  ng-repeat="doc in docs" class="pointer over" ng-click="go('inspection-report', doc.id)" > 
					<td><span class="label label-order">{{doc.related.order.reference}}</span></td>
					<td><span class="label label-shipment">{{doc.related.shipment.reference}}</span></td>
					<td><small>{{doc.location}}</small></td>
					<td><small>{{doc.user}}</small></td>
					<td><small>{{doc.dates.created * 1000 | date:'dd.MM.yy, HH:mm'}}</small></td>
					<td><small>{{doc.dates.closed * 1000 | date:'dd.MM.yy, HH:mm'}}</small></td>
					<td>{{doc.boxes.length}}</td>
					<td>
					    <span ng-show="doc.conformity.true" class="filet-right"><i class="fa fa-check success"></i> {{doc.conformity.true}}</span>
					    <span ng-show="doc.conformity.false" class="filet-right"><i class="fa fa-times important"></i> {{doc.conformity.false}}</span>
					</td>
				</tr>
			</tbody>
			<tfoot ng-show="pagesCount>1">
				<tr>
					<td colspan="4">
					<pagination num-pages="pagesCount" current-page="currentPage" max-size="10" boundary-links="true" direction-links="false" on-select-page="loadList(collect(listInit, {page: page}))" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></td>
				</tr>
			</tfoot>
		</table>
	</div>
</div>